language: perl
perl:
  - "5.8"
  - "5.20"
matrix:
  include:
    - perl: 5.20
      before_install:
        - cpanm --quiet --notest XML::XPath
        - cpanm --quiet --notest DBM::Deep
        - cpanm --quiet --notest Digest::MD5
        - cpanm --quiet --notest File::Find::Rule
        - cpanm --quiet --notest Spreadsheet::ParseExcel
        - cpanm --quiet --notest Text::CSV_XS
        - cpanm --quiet --notest Devel::Cover::Report::Coveralls
        - ./build-data.sh
      script: "perl Makefile.PL && make && cover -ignore blib/lib/Number/Phone/UK/Data.pm -test -report coveralls"
      # env: COVERAGE=1
before_install:
  - cpanm --quiet --notest XML::XPath
  - cpanm --quiet --notest DBM::Deep
  - cpanm --quiet --notest Digest::MD5
  - cpanm --quiet --notest File::Find::Rule
  - cpanm --quiet --notest Spreadsheet::ParseExcel
  - cpanm --quiet --notest Text::CSV_XS
  - ./build-data.sh
